<script src="__STATIC__/admin/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
<script src="__STATIC__/admin/layui/layui.all.js" type="text/javascript" charset="utf-8"></script>
<script src="__STATIC__/admin/layui/lay/modules/xm-select.js" type="text/javascript" charset="utf-8"></script>
<script>
    // 自定义模块，这里只需要开放soulTable即可
    layui.config({
        base: '/static/admin/layui/',   // 第三方模块所在目录
        //     base: '/static/modules/',   // 第三方模块所在目录
        //     version: 'v1.5.10' // 插件版本号
    }).extend({
        treeSelect: 'treeSelect'
        //     soulTable: 'soulTable/soulTable.slim',
    });

    layui.use(['treeSelect'], function() {
        var treeSelect = layui.treeSelect;

        treeSelect.render({
            // 选择器
            elem: '#tree',
            // 数据
            data: "{:url('supply_goods/ajax_goods_list')}",
            // 请求头
            headers: {},
            // 异步加载方式：get/post，默认get
            type: 'get',
            // 占位符
            placeholder: '分类',
            // 是否开启搜索功能：true/false，默认false
            search: true,
            // 一些可定制的样式
            style: {
                folder: {
                    enable: true
                },
                line: {
                    enable: true
                }
            },
            // 点击回调
            click: function(d){
                table_reload();
                // console.log($('#tree').val());
            },
            // 加载完成后的回调函数
            success: function (d) {
//                选中节点，根据id筛选
                treeSelect.checkNode('tree', "");

//                获取zTree对象，可以调用zTree方法
                var treeObj = treeSelect.zTree('tree');
                console.log(treeObj);

//                刷新树结构
                treeSelect.refresh('tree');
            }
        });
    })
    //
    // var form = layui.form,
    //     $ = layui.jquery,
    //     laydate = layui.laydate,
    //     soulTable = layui.soulTable,
    //     table = layui.table;
    //
    //
    // // 表格刷新方法 带form数据
    // table_reload = function(){
    //     var where = form.val("search-form");
    //     //执行重载
    //     table.reload('table', {
    //         where: where
    //     });
    // };
    //
    // //日期范围
    // laydate.render({
    //     elem: '#time'
    //     ,range: '至'
    //     ,type:'datetime'
    //
    // });



    // $(document).keyup(function(event){
    //     if(event.keyCode ==13){
    //         $(".btn_search").trigger("click");
    //     }
    // });

    // 动态下拉框 demo
    // var select_dom = xmSelect.render({
    //     el: '#contract_list',
    //     tips: '请选择要采购的合同编号',
    //     radio: true,
    //     autoRow: true,
    //     filterable: true,
    //     clickClose: true,
    //     remoteSearch: true,
    //     style: {
    //         width: '80%',
    //         margin:'10px auto',
    //     },
    //     remoteMethod: function(val, cb, show){
    //         //这里如果val为空, 则不触发搜索
    //         if(!val){
    //             return cb([]);
    //         }
    //         //这里引入了一个第三方插件axios, 相当于$.ajax
    //         var form_data = {
    //             search : val,
    //             limit  : 15,
    //         };
    //         $.get("{:url('contract/ajax_get_sel_list')}", form_data,function(ret){
    //             if (ret.code == 200){
    //                 cb(ret.data)
    //             }else{
    //                 cb([])
    //             }
    //         });
    //     },
    // });
</script>
